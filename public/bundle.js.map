{"version":3,"sources":["webpack:///webpack/bootstrap 238259b0237a0a4c0f67","webpack:///./assets/anilist.js","webpack:///./assets/bling.js","webpack:///./assets/mal.js","webpack:///./assets/app.js"],"names":["Anilist","anilistCall","query","variables","fetch","method","headers","Accept","body","JSON","stringify","getUserId","name","then","res","json","data","User","id","catch","Error","err","fetchList","userId","anime","MediaListCollection","statusLists","manga","buildLists","completed","current","dropped","paused","planning","sanitize","item","type","progress","volumes","progressVolumes","status","score","media","idMal","title","romaji","error","msg","$","innerHTML","getList","username","lists","map","module","exports","window","document","querySelector","bind","$$","querySelectorAll","Node","prototype","on","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","i","Mal","auth","check","user","pass","btoa","add","anilist","require","Ani2Sync","total","errors","console","reset","classList","remove","notFound","encodeURIComponent","malError","listAnime","a","markSuccess","markFail","showProgress","count","setAttribute","handle","list","length","newList","slice","shift","message","sync","event","preventDefault","malUser","value","trim","malPass","aniUser","setTimeout","restart","from","e"],"mappings":"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","file":"./public/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 238259b0237a0a4c0f67","/* globals $ */\n// const ANILIST_TOKEN_URL = 'https://ytjv79nzl4.execute-api.us-east-1.amazonaws.com/dev/token';\n\nconst Anilist = (() => {\n  const anilistCall = (query, variables) =>\n    fetch('https://graphql.anilist.co', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables,\n      }),\n    });\n\n  const getUserId = name =>\n    anilistCall(`\n      query ($name: String) {\n        User (name: $name) {\n          id\n        }\n      }\n    `, { name })\n    .then(res => res.json())\n    .then(res => res.data.User.id)\n    .catch(err => Error(err));\n\n  const fetchList = userId =>\n    anilistCall(`\n      query {\n        anime: MediaListCollection(userId: $userId, type: ANIME) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        },\n        manga: MediaListCollection(userId: $userId, type: MANGA) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        }\n      }\n    `, { userId })\n    .then(res => res.json())\n    .then(res => ({\n      anime: res.data.anime.MediaListCollection.statusLists,\n      manga: res.data.manga.MediaListCollection.statusLists,\n    }))\n    .catch(err => Error(err));\n\n  const buildLists = (res) => {\n    if (!res) return { anime: [], manga: [] };\n    const { anime, manga } = res;\n    return {\n      anime: [\n        ...anime.completed || [],\n        ...anime.current || [],\n        ...anime.dropped || [],\n        ...anime.paused || [],\n        ...anime.planning || [],\n      ],\n      manga: [\n        ...manga.completed || [],\n        ...manga.current || [],\n        ...manga.dropped || [],\n        ...manga.paused || [],\n        ...manga.planning || [],\n      ],\n    };\n  };\n\n  const sanitize = (item, type) => ({\n    type,\n    progress: item.progress,\n    volumes: item.progressVolumes,\n    status: item.status,\n    score: item.score,\n    id: item.media.idMal,\n    title: item.media.title.romaji,\n  });\n\n  const error = (msg) => {\n    $('.anilist-error').innerHTML = msg;\n  };\n\n  return {\n    getList: username =>\n      getUserId(username)\n        .then(userId => fetchList(userId))\n        .then(res => buildLists(res))\n        .then(lists => [\n          ...lists.anime.map(item => sanitize(item, 'anime')),\n          ...lists.manga.map(item => sanitize(item, 'manga')),\n        ])\n        .catch(err => Error(err)),\n    error: msg => error(msg),\n  };\n})();\n\nmodule.exports = Anilist;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/anilist.js","/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/bling.js","/* globals $ */\nconst Mal = (() => {\n  let auth = '';\n\n  const error = (msg) => {\n    $('.mal-error').innerHTML = msg;\n  };\n\n  return {\n    check: (user, pass) =>\n      fetch('/mal/check', {\n        method: 'post',\n        body: JSON.stringify({ auth: btoa(`${user}:${pass}`) }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.json())\n      .then((res) => {\n        if (res.user) {\n          auth = btoa(`${user}:${pass}`);\n          return true;\n        }\n        return false;\n      })\n      .catch(err => Error(err)),\n\n    add: anilist =>\n      fetch('/mal/add', {\n        method: 'post',\n        body: JSON.stringify({ auth, anilist }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.json())\n      .catch(err => Error(err)),\n    error: msg => error(msg),\n  };\n})();\n\nmodule.exports = Mal;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/mal.js","/* eslint-disable no-unused-vars */\n/* globals $, $$ */\nrequire('./bling.js');\nconst Anilist = require('./anilist');\nconst Mal = require('./mal');\n\nconst Ani2Sync = (() => {\n  let total = 0;\n  let errors = 0;\n\n  // For errors related to bad credentials, API errors etc.\n  const error = (msg) => {\n    console.error(msg);\n    // TODO display something in the DOM\n  };\n\n  const reset = () => {\n    $('#credentials').classList.remove('hidden');\n    $('#sync').classList.add('hidden');\n    $('#error-count').innerHTML = '';\n    $('#errors').innerHTML = '';\n    $('#results').innerHTML = '';\n    $('.anilist-error').innerHTML = '';\n    $('.mal-error').innerHTML = '';\n    $('#submit').classList.remove('is-loading');\n    total = 0;\n    errors = 0;\n  };\n\n  const notFound = (title) => {\n    $('#errors').innerHTML += `\n      <li><a target=\"_blank\" href=\"https://www.google.com/search?q=${encodeURIComponent(title)}+site%3Amyanimelist.net\">\n      Please try adding it manually</a>.</li>\n    `;\n  };\n\n  // For errors reported by MAL (not found, not approved yet, etc.)\n  const malError = (title) => {\n    $('#errors').innerHTML += `<li>Could not match ${title}</li>`;\n    errors += 1;\n  };\n\n  /* const display = (res) => {\n      $(`#${mal}`).classList.add('added');\n    } else return null;\n  }; */\n\n  const listAnime = (a) => {\n    $('#results').innerHTML += `<li id=\"al-${a.id}\">${a.title}</li>`;\n  };\n\n  const markSuccess = (id) => {\n    $(`#al-${id}`).classList.add('added');\n  };\n\n  const markFail = (id) => {\n    $(`#al-${id}`).classList.add('error');\n  };\n\n  const showProgress = (count) => {\n    $('.progress').setAttribute('value', (100 * (total - count)) / total);\n    $('#status-message').innerHTML = `${count} items remaining.`;\n    $('#error-count').innerHTML = `Errors: ${errors}.`;\n  };\n\n  const handle = (list) => {\n    showProgress(list.length);\n    // Base case for recursion\n    if (list.length <= 0) return;\n\n    const newList = list.slice(); // treat arguments as immutable\n    const item = newList.shift();\n    // add anime to results to be marked success/fail later\n    listAnime(item);\n    Mal.add(item)\n    .then((res) => {\n      // this is the response from MAL - not found/blank or Already in list or Created\n      if (res) {\n        if (res.message === 'Created' || res.message === 'Updated') {\n          markSuccess(item.id);\n        } else {\n          markFail(item.id);\n          malError(`${res.title}: ${res.message}`);\n          if (res.message === 'Invalid ID') notFound(item.title);\n        }\n      } else {\n        // Empty response from MAL means item not found\n        markFail(item.id);\n        malError(`${res.title}: ${res.message}`);\n        notFound(item.title);\n      }\n      // Recursively call until list is empty\n      handle(newList);\n    })\n    .catch(err => error(err));\n  };\n\n  return {\n    sync: (event) => {\n      event.preventDefault();\n      const malUser = $('#mal-username').value.trim();\n      const malPass = $('#mal-password').value.trim();\n      $('#submit').classList.add('is-loading');\n      Mal.check(malUser, malPass)\n      .then((res) => {\n        if (res) {\n          const aniUser = $('#anilist-username').value.trim();\n          Anilist.getList(aniUser)\n          .then((lists) => { // This should be { anime[], manga[] } now\n          /* So how should we take care of this?\n            Should I write two update functions?\n            The other thing I could do is just make one big list - there's already a type\n            on each one\n          */\n            if (list && list.length) {\n              // We have good inputs on all three counts; let's go\n              // Clear old results\n              reset();\n              // Switch views\n              $('#credentials').classList.add('hidden');\n              $('#sync').classList.remove('hidden');\n              // Track total items in namespace for progress meter\n              total = list.length;\n              // Start recursive handler\n              return handle(list);\n            }\n            // Anilist returned nothing\n            Anilist.error(`Anilist.co returned no results for ${aniUser}.`);\n            setTimeout(() => reset(), 3000);\n            return error('Anilist.co returned no results.');\n          })\n          .catch(err => error(err));\n        } else {\n          // Mal auth check returned false\n          Mal.error('Invaild MAL credentials.');\n          setTimeout(() => reset(), 3000);\n          return error('Invaild MAL credentials.');\n        }\n        return null;\n      })\n      .catch(err => error(err));\n    },\n    restart: () => {\n      reset();\n    },\n  };\n})();\n\n(() => {\n  $('#credentials').on('submit', Ani2Sync.sync);\n  $('#reset').on('click', Ani2Sync.restart);\n  $('#help').on('click', () => {\n    $('#helpModal').classList.add('is-active');\n  });\n  Array.from($$('.modal-background')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n  Array.from($$('.modal-close')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./assets/app.js"],"sourceRoot":""}