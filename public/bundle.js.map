{"version":3,"sources":["webpack:///webpack/bootstrap dd41d8ad6f7139aba150","webpack:///./assets/anilist.js","webpack:///./assets/bling.js","webpack:///./assets/mal.js","webpack:///./assets/app.js"],"names":["Anilist","flatten","Object","keys","obj","reduce","accumulator","list","concat","acc2","item","uniqify","arr","seen","Set","filter","has","media","idMal","add","anilistCall","query","variables","fetch","method","headers","Accept","body","JSON","stringify","fetchList","userName","then","res","json","data","anime","manga","sanitize","type","progress","progressVolumes","startedAt","year","month","day","completedAt","repeat","status","score","id","title","romaji","getList","username","lists","map","catch","err","console","error","module","exports","window","$","document","querySelector","bind","$$","querySelectorAll","Node","prototype","on","name","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","i","statusCodes","buildDate","dateString","parts","split","Number","sanitizeAnimeListing","series_animedb_id","my_watched_episodes","my_start_date","my_finish_date","my_status","my_score","my_rewatching","sanitizeMangaListing","series_mangadb_id","my_read_chapters","my_read_volumes","my_rereadingg","getMalAppInfoList","user","result","myanimelist","Mal","auth","check","pass","authCheck","btoa","url","success","includes","Error","fetchAnimeList","fetchMangaList","Promise","all","hashTable","anilist","text","replace","require","Ani2Sync","total","errors","malItems","msg","reset","classList","remove","innerHTML","notFound","encodeURIComponent","malError","listAnime","a","markSuccess","markFail","showProgress","count","setAttribute","changed","alItem","malItem","matchFields","some","field","dateMatchFields","handle","length","newList","slice","shift","message","sync","event","preventDefault","malUser","value","trim","malPass","aniUser","alList","malList","setTimeout","restart","from","e"],"mappings":"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","file":"./public/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 73);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dd41d8ad6f7139aba150","const Anilist = (() => {\n  /*\n    Anilist response takes the following form:\n    data: {\n      anime: {\n        statusLists: {\n          completed: [],\n          planning: [],\n          etc.\n        },\n        customLists: { etc. },\n      },\n      manga: {\n        statusLists: { etc. },\n        customLists: { etc. },\n      }\n    }\n    'data' is stripped off by the fetch function, and flatten() is called once for\n    anime and once for manga\n\n    flatten() combines the statusLists and customLists, and all of the lists embedded in them,\n    and creates one big flat array of items\n  */\n  const flatten = obj =>\n  // Outer reduce concats arrays built by inner reduce\n    Object.keys(obj).reduce((accumulator, list) =>\n      // Inner reduce builds an array out of the lists\n      accumulator.concat(Object.keys(obj[list]).reduce((acc2, item) =>\n        acc2.concat(obj[list][item]), [])), []);\n\n  // Remove duplicates from array\n  const uniqify = (arr) => {\n    const seen = new Set();\n    return arr.filter(item => (seen.has(item.media.idMal) ? false : seen.add(item.media.idMal)));\n  };\n\n  const anilistCall = (query, variables) =>\n    fetch('https://graphql.anilist.co', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables,\n      }),\n    });\n\n  const fetchList = userName =>\n    anilistCall(`\n      query ($userName: String) {\n        anime: MediaListCollection(userName: $userName, type: ANIME) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            startedAt {\n              year\n              month\n              day\n            }\n            completedAt {\n              year\n              month\n              day\n            }\n            repeat\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          },\n          customLists {\n            status\n            score(format:POINT_10)\n            progress\n            startedAt {\n              year\n              month\n              day\n            }\n            completedAt {\n              year\n              month\n              day\n            }\n            repeat\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        },\n        manga: MediaListCollection(userName: $userName, type: MANGA) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            progressVolumes\n            startedAt {\n              year\n              month\n              day\n            }\n            completedAt {\n              year\n              month\n              day\n            }\n            repeat\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          },\n          customLists {\n            status\n            score(format:POINT_10)\n            progress\n            progressVolumes\n            startedAt {\n              year\n              month\n              day\n            }\n            completedAt {\n              year\n              month\n              day\n            }\n            repeat\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        }\n      }\n    `, { userName })\n    .then(res => res.json())\n    .then(res => res.data)\n    .then(res => ({\n      anime: uniqify(flatten(res.anime)),\n      manga: uniqify(flatten(res.manga)),\n    }));\n\n  const sanitize = (item, type) => ({\n    type,\n    progress: item.progress,\n    progressVolumes: item.progressVolumes,\n    startedAt: {\n      year: item.startedAt.year || 0,\n      month: item.startedAt.month || 0,\n      day: item.startedAt.day || 0,\n    },\n    completedAt: {\n      year: item.completedAt.year || 0,\n      month: item.completedAt.month || 0,\n      day: item.completedAt.day || 0,\n    },\n    repeat: item.repeat,\n    status: item.status,\n    score: item.score,\n    id: item.media.idMal,\n    title: item.media.title.romaji,\n  });\n\n  return {\n    getList: username =>\n      fetchList(username)\n        .then(lists => [\n          ...lists.anime.map(item => sanitize(item, 'anime')),\n          ...lists.manga.map(item => sanitize(item, 'manga')),\n        ])\n        .catch((err) => {\n          console.error('Anilist getList error', err);\n          return `No data found for user ${username}`;\n        }),\n  };\n})();\n\nmodule.exports = Anilist;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/anilist.js","/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/bling.js","/* globals $ */\nconst statusCodes = ['', 'CURRENT', 'COMPLETED', 'PAUSED', 'DROPPED', '', 'PLANNING'];\n\nconst buildDate = (dateString) => {\n  const parts = dateString.split('-');\n  return {\n    year: Number(parts[0]),\n    month: Number(parts[1]),\n    day: Number(parts[2]),\n  };\n};\n\nconst sanitizeAnimeListing = item => ({\n  type: 'anime',\n  id: Number(item.series_animedb_id[0]),\n  progress: Number(item.my_watched_episodes[0]),\n  startedAt: buildDate(item.my_start_date[0]),\n  completedAt: buildDate(item.my_finish_date[0]),\n  status: statusCodes[item.my_status[0]],\n  score: Number(item.my_score[0]),\n  repeat: Number(item.my_rewatching[0]),\n});\n\nconst sanitizeMangaListing = item => ({\n  type: 'manga',\n  id: Number(item.series_mangadb_id[0]),\n  progress: Number(item.my_read_chapters[0]),\n  progressVolumes: Number(item.my_read_volumes[0]),\n  startedAt: buildDate(item.my_start_date[0]),\n  completedAt: buildDate(item.my_finish_date[0]),\n  status: statusCodes[item.my_status[0]],\n  score: Number(item.my_score[0]),\n  repeat: Number(item.my_rereadingg[0]), // sic, spelling error is MAL's\n});\n\nconst getMalAppInfoList = (user, type) =>\n  fetch(`https://us-central1-douki-178418.cloudfunctions.net/malAppInfoProxy?user=${user}&type=${type}`)\n  .then(res => res.json())\n  .then(res => res.result.myanimelist)\n  .then(list => list.anime || list.manga);\n\nconst Mal = (() => {\n  let auth = '';\n\n  return {\n    check: (user, pass) => {\n      const authCheck = btoa(`${user}:${pass}`);\n      const url = `https://us-central1-douki-178418.cloudfunctions.net/mal-proxy/check?auth=${authCheck}`;\n      return fetch(url)\n        .then(res => res.json())\n        .then((res) => {\n          if (res.success && res.success.includes('username')) {\n            auth = authCheck;\n            return true;\n          }\n          return false;\n        })\n        .catch(err => Error(err));\n    },\n\n    getList: (user) => {\n      const fetchAnimeList = getMalAppInfoList(user, 'anime'); // TODO error messages\n      const fetchMangaList = getMalAppInfoList(user, 'manga');\n      return Promise.all([fetchAnimeList, fetchMangaList])\n        .then((lists) => {\n          const hashTable = {};\n          lists[0].forEach((item) => {\n            const anime = sanitizeAnimeListing(item);\n            hashTable[anime.id] = anime;\n          });\n          lists[1].forEach((item) => {\n            const manga = sanitizeMangaListing(item);\n            hashTable[manga.id] = manga;\n          });\n          return hashTable;\n        })\n        .catch((error) => {\n          console.error(error);\n          debugger; // TODO error message\n        });\n    },\n\n    add: anilist =>\n      fetch('/mal/add', {\n        method: 'post',\n        body: JSON.stringify({ auth, anilist }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.text())\n      // Strip off leading and tailing double quotes\n      .then(text => text.replace(/\"/g, ''))\n      .catch(err => Error(err)),\n  };\n})();\n\nmodule.exports = Mal;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/mal.js","/* eslint-disable no-unused-vars */\n/* globals $, $$ */\nrequire('./bling.js');\nconst Anilist = require('./anilist');\nconst Mal = require('./mal');\n\nconst Ani2Sync = (() => {\n  let total = 0;\n  let errors = 0;\n  let malItems = {};\n\n  // For errors related to bad credentials, API errors etc.\n  const error = (msg) => {\n    console.error(msg);\n  };\n\n  const reset = () => {\n    $('#credentials').classList.remove('hidden');\n    $('#sync').classList.add('hidden');\n    $('#error-count').innerHTML = '';\n    $('#errors').innerHTML = '';\n    $('#results').innerHTML = '';\n    $('.anilist-error').innerHTML = '';\n    $('.mal-error').innerHTML = '';\n    $('#submit').classList.remove('is-loading');\n    total = 0;\n    errors = 0;\n  };\n\n  const notFound = (title) => {\n    $('#errors').innerHTML += `\n      <li><a target=\"_blank\" href=\"https://www.google.com/search?q=${encodeURIComponent(title)}+site%3Amyanimelist.net\">\n      Please try adding it manually</a>.</li>\n    `;\n  };\n\n  // For errors reported by MAL (not found, not approved yet, etc.)\n  const malError = (title) => {\n    $('#errors').innerHTML += `<li>Could not match ${title}</li>`;\n    errors += 1;\n  };\n\n  /* const display = (res) => {\n      $(`#${mal}`).classList.add('added');\n    } else return null;\n  }; */\n\n  const listAnime = (a) => {\n    $('#results').innerHTML += `<li id=\"al-${a.id}\">${a.title}</li>`;\n  };\n\n  const markSuccess = (id) => {\n    $(`#al-${id}`).classList.add('added');\n  };\n\n  const markFail = (id) => {\n    $(`#al-${id}`).classList.add('error');\n  };\n\n  const showProgress = (count) => {\n    $('.progress').setAttribute('value', (100 * (total - count)) / total);\n    $('#status-message').innerHTML = `${count} items remaining.`;\n    $('#error-count').innerHTML = `Errors: ${errors}.`;\n  };\n\n  // Returns true if item has changed and needs to be updated\n  const changed = (alItem) => {\n    const malItem = malItems[alItem.id];\n    if (!malItem) {\n      // Item does not exist yet, must update\n      return true;\n    }\n\n    const matchFields = ['progress', 'status', 'score'];\n    if (matchFields.some(field => malItem[field] !== alItem[field])) return true;\n\n    const dateMatchFields = ['year', 'month', 'day'];\n    if (alItem.startedAt) {\n      if (!malItem.startedAt) return true;\n      if (dateMatchFields.some(field =>\n        alItem.startedAt[field] !== malItem.startedAt[field])) return true;\n    }\n\n    if (alItem.completedAt) {\n      if (!malItem.completedAt) return true;\n      if (dateMatchFields.some(field =>\n        alItem.completedAt[field] !== malItem.completedAt[field])) return true;\n    }\n\n    // Since this one can be undefined, it must be checked separately\n    if (alItem.progressVolumes) {\n      if (!malItem.progressVolumes) return true;\n      if (malItem.progressVolumes !== alItem.progressVolumes) return true;\n    }\n\n    // No changes detected\n    return false;\n  };\n\n  const handle = (list) => {\n    showProgress(list.length);\n    // Base case for recursion\n    if (list.length <= 0) return;\n\n    const newList = list.slice(); // treat arguments as immutable\n    const item = newList.shift();\n    // add anime to results to be marked success/fail later\n    listAnime(item);\n    Mal.add(item)\n    .then((message) => {\n      // this is the response from /mal/add - Created or Updated or an error\n      if (message) {\n        if (message === 'Created' || message === 'Updated') {\n          markSuccess(item.id);\n        } else {\n          markFail(item.id);\n          malError(`${item.title}: ${message}`);\n          if (message === 'Invalid ID') notFound(item.title);\n        }\n      } else {\n        // Empty response from MAL means item not found\n        markFail(item.id);\n        malError(`${item.title}: ${message}`);\n        notFound(item.title);\n      }\n      // Recursively call until list is empty\n      handle(newList);\n    })\n    .catch(err => error(err));\n  };\n\n  return {\n    sync: (event) => {\n      event.preventDefault();\n      const malUser = $('#mal-username').value.trim();\n      const malPass = $('#mal-password').value.trim();\n      $('#submit').classList.add('is-loading');\n      Mal.check(malUser, malPass)\n      .then((res) => {\n        if (res) {\n          const aniUser = $('#anilist-username').value.trim();\n          Anilist.getList(aniUser)\n          .then((alList) => {\n            if (alList && alList.length) {\n              // We have good inputs on all counts; let's go\n              Mal.getList(malUser)\n                .then((malList) => {\n                  malItems = malList;\n                  const list = alList.filter(item => changed(item));\n                  debugger;\n                });\n\n              // Clear old results\n              // reset();\n              // // Switch views\n              // $('#credentials').classList.add('hidden');\n              // $('#sync').classList.remove('hidden');\n              // // Track total items in namespace for progress meter\n              // total = list.length;\n              // // Start recursive handler\n              // return handle(list);\n            }\n            // Anilist returned nothing\n            $('.anilist-error').innerHTML = `Anilist.co returned no results for ${aniUser}.`;\n            setTimeout(() => reset(), 3000);\n            return error('Anilist.co returned no results.');\n          })\n          .catch(err => error(err));\n        } else {\n          // Mal auth check returned false\n          $('.mal-error').innerHTML = 'Invaild MAL credentials.';\n          setTimeout(() => reset(), 3000);\n          return error('Invaild MAL credentials.');\n        }\n        return null;\n      })\n      .catch(err => error(err));\n    },\n    restart: () => {\n      reset();\n    },\n  };\n})();\n\n(() => {\n  $('#credentials').on('submit', Ani2Sync.sync);\n  $('#reset').on('click', Ani2Sync.restart);\n  $('#help').on('click', () => {\n    $('#helpModal').classList.add('is-active');\n  });\n  Array.from($$('.modal-background')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n  Array.from($$('.modal-close')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./assets/app.js"],"sourceRoot":""}