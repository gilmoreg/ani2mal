{"version":3,"sources":["webpack:///public/bundle.js","webpack:///webpack/bootstrap 925649f8a88c38d3a9e7","webpack:///./assets/bling.js","webpack:///./assets/app.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","window","$","document","querySelector","bind","$$","querySelectorAll","Node","on","fn","this","addEventListener","NodeList","__proto__","Array","forEach","elem","_toConsumableArray","arr","isArray","arr2","length","from","Anilist","fetchToken","fetch","then","res","json","JSON","parse","access_token","catch","err","console","log","fetchList","username","token","buildList","concat","lists","completed","plan_to_watch","dropped","on_hold","watching","sanitize","item","episodes_watched","list_status","score","priority","notes","title","anime","title_romaji","getList","map","append","Mal","auth","malCheck","user","pass","method","body","stringify","btoa","headers","Accept","Content-Type","malSearch","titles","anilist","display","search","list","innerHTML","newList","slice","shift","sync","check","event","preventDefault","malUser","trim","malPass","aniUser"],"mappings":"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","file":"./public/bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n/* eslint-disable no-undef */\n/* eslint-disable no-unused-vars */\n__webpack_require__(0);\n\nvar Anilist = function () {\n  var fetchToken = function fetchToken() {\n    return fetch('https://ytjv79nzl4.execute-api.us-east-1.amazonaws.com/dev/token').then(function (res) {\n      return res.json();\n    }).then(function (res) {\n      return JSON.parse(res).access_token;\n    }).catch(function (err) {\n      return console.log('err', err);\n    });\n  };\n\n  var fetchList = function fetchList(username, token) {\n    return fetch('https://anilist.co/api/user/' + username + '/animelist?access_token=' + token).then(function (res) {\n      return res.json();\n    }).catch(function (err) {\n      return console.log('err', err);\n    });\n  };\n\n  var buildList = function buildList(res) {\n    return (\n      // console.log(Object.keys(res.lists));\n      // [ 'completed', 'plan_to_watch', 'dropped', 'on_hold', 'watching' ]\n      [].concat(_toConsumableArray(res.lists.completed || []), _toConsumableArray(res.lists.plan_to_watch || []), _toConsumableArray(res.lists.dropped || []), _toConsumableArray(res.lists.on_hold || []), _toConsumableArray(res.lists.watching || []))\n    );\n  };\n\n  var sanitize = function sanitize(item) {\n    return {\n      episodes_watched: item.episodes_watched,\n      list_status: item.list_status,\n      score: item.score,\n      priority: item.priority,\n      notes: item.notes,\n      title: item.anime.title_romaji\n    };\n  };\n\n  return {\n    getList: function getList(username) {\n      return fetchToken().then(function (token) {\n        return fetchList(username, token);\n      }).then(function (res) {\n        return buildList(res);\n      }).then(function (res) {\n        return res.map(function (item) {\n          return sanitize(item);\n        });\n      }).catch(function (err) {\n        $('#status').append('<li>Unable to fetch Anilist.co list: ' + err + '</li>');\n        console.log(err);\n        return err;\n      });\n    }\n  };\n}();\n\nvar Mal = function () {\n  var auth = '';\n  var errors = 0;\n\n  var malCheck = function malCheck(user, pass) {\n    return fetch('http://localhost:4000/mal/check', {\n      method: 'post',\n      body: JSON.stringify({ auth: btoa(user + ':' + pass) }),\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).catch(function (err) {\n      return console.log('MAL check err', err);\n    });\n  };\n\n  var malSearch = function malSearch(titles, anilist) {\n    return fetch('http://localhost:4000/mal/add', {\n      method: 'post',\n      body: JSON.stringify({ auth: auth, anilist: anilist }),\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).catch(function (err) {\n      return console.log('MAL search err', err);\n    });\n  };\n\n  var notFound = function notFound(a) {\n    return a.title + '.\\n    <a target=\"_blank\" href=\"https://www.google.com/search?q=' + encodeURIComponent(a.title) + '+site%3Amyanimelist.net\">\\n    Please find the MAL ID</a> and enter it here:\\n    <label for=\"malID-' + a.anime.id + '\">MAL ID</label>\\n    <input type=\"text\" id=\"malID-' + a.anime.id + '\" name=\"malID\">\\n    <input type=\"hidden\" name=\"aniTitle\" value=\"' + a.title + '\">\\n    ';\n  };\n\n  var fail = function fail(title) {\n    $('#errors').innerHTML += '<li>Could not match ' + title + '</li>';\n    errors += 1;\n    $('#error-count').innerHTML = '' + errors;\n  };\n\n  var display = function display(res) {\n    console.log('display', res);\n  };\n  /* $('#results').append(`<li id=\"${mal}\">Matched ${anilist.anime.title_romaji}</li>`);\n    .then((res) => {\n      if (res === 'Created' || res.match(/The anime \\(id: \\d+\\) is already in the list./g)) {\n        $(`#${mal}`).addClass('added');\n        resolve();\n      } else {\n        $(`#${mal}`).addClass('error');\n        fail(`Error: ${anilist.anime.title_romaji} - ${res}`);\n        resolve();\n      }\n    });*/\n\n  var search = function search(list) {\n    if (list.length > 0) {\n      $('#current').innerHTML = '' + (list.length - 1);\n      var newList = list.slice();\n      var item = newList.shift();\n      malSearch(auth, item).then(function (res) {\n        display(res);\n        search(newList);\n        /* if (res && res.malID) {\n          add(item, res.malID);\n          search(newList);\n        } else {\n          fail(notFound(item));\n          search(newList);\n        } */\n      });\n    }\n  };\n\n  return {\n    sync: function sync(list) {\n      $('#status').innerHTML = 'Items remaining: <span id=\"current\">' + list.length + '</span>. Errors: <span id=\"error-count\">0</span>.';\n      search(list);\n    },\n    check: function check(user, pass) {\n      return malCheck(user, pass).then(function (res) {\n        if (res !== 'Invalid credentials') {\n          auth = btoa(user + ':' + pass);\n          return true;\n        }\n        $('#status').innerHTML = 'Invalid MAL credentials';\n        return false;\n      });\n    }\n  };\n}();\n\nvar sync = function sync(event) {\n  event.preventDefault();\n  var malUser = $('#mal-username').value.trim();\n  var malPass = $('#mal-password').value.trim();\n  Mal.check(malUser, malPass).then(function (res) {\n    if (res) {\n      var aniUser = $('#anilist-username').value.trim();\n      Anilist.getList(aniUser).then(function (list) {\n        console.log('Mal list', list);\n        if (list) Mal.sync(list);\n      }).catch(function (err) {\n        return console.log('err', err);\n      });\n    }\n  }).catch(function (err) {\n    return console.log('err', err);\n  });\n};\n\n(function () {\n  $('#credentials').on('submit', sync);\n})();\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// public/bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 925649f8a88c38d3a9e7","/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/bling.js","/* eslint-disable no-undef */\n/* eslint-disable no-unused-vars */\nrequire('./bling.js');\n\nconst Anilist = (() => {\n  const fetchToken = () =>\n    fetch('https://ytjv79nzl4.execute-api.us-east-1.amazonaws.com/dev/token')\n      .then(res => res.json())\n      .then(res => JSON.parse(res).access_token)\n      .catch(err => console.log('err', err));\n\n  const fetchList = (username, token) =>\n    fetch(`https://anilist.co/api/user/${username}/animelist?access_token=${token}`)\n      .then(res => res.json())\n      .catch(err => console.log('err', err));\n\n  const buildList = res =>\n    // console.log(Object.keys(res.lists));\n    // [ 'completed', 'plan_to_watch', 'dropped', 'on_hold', 'watching' ]\n    [\n      ...res.lists.completed || [],\n      ...res.lists.plan_to_watch || [],\n      ...res.lists.dropped || [],\n      ...res.lists.on_hold || [],\n      ...res.lists.watching || [],\n    ];\n\n  const sanitize = item => ({\n    episodes_watched: item.episodes_watched,\n    list_status: item.list_status,\n    score: item.score,\n    priority: item.priority,\n    notes: item.notes,\n    title: item.anime.title_romaji,\n  });\n\n  return {\n    getList: username =>\n      fetchToken()\n        .then(token => fetchList(username, token))\n        .then(res => buildList(res))\n        .then(res => res.map(item => sanitize(item)))\n        .catch((err) => {\n          $('#status').append(`<li>Unable to fetch Anilist.co list: ${err}</li>`);\n          console.log(err);\n          return err;\n        }),\n  };\n})();\n\nconst Mal = (() => {\n  let auth = '';\n  let errors = 0;\n\n  const malCheck = (user, pass) =>\n    fetch('http://localhost:4000/mal/check', {\n      method: 'post',\n      body: JSON.stringify({ auth: btoa(`${user}:${pass}`) }),\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n    .then(res => res.json())\n    .catch(err => console.log('MAL check err', err));\n\n  const malSearch = (titles, anilist) =>\n    fetch('http://localhost:4000/mal/add', {\n      method: 'post',\n      body: JSON.stringify({ auth, anilist }),\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n      },\n    })\n    .then(res => res.json())\n    .catch(err => console.log('MAL search err', err));\n\n  const notFound = a =>\n    `${a.title}.\n    <a target=\"_blank\" href=\"https://www.google.com/search?q=${encodeURIComponent(a.title)}+site%3Amyanimelist.net\">\n    Please find the MAL ID</a> and enter it here:\n    <label for=\"malID-${a.anime.id}\">MAL ID</label>\n    <input type=\"text\" id=\"malID-${a.anime.id}\" name=\"malID\">\n    <input type=\"hidden\" name=\"aniTitle\" value=\"${a.title}\">\n    `;\n\n  const fail = (title) => {\n    $('#errors').innerHTML += `<li>Could not match ${title}</li>`;\n    errors += 1;\n    $('#error-count').innerHTML = `${errors}`;\n  };\n\n  const display = (res) => {\n    console.log('display', res);\n  };\n    /* $('#results').append(`<li id=\"${mal}\">Matched ${anilist.anime.title_romaji}</li>`);\n      .then((res) => {\n        if (res === 'Created' || res.match(/The anime \\(id: \\d+\\) is already in the list./g)) {\n          $(`#${mal}`).addClass('added');\n          resolve();\n        } else {\n          $(`#${mal}`).addClass('error');\n          fail(`Error: ${anilist.anime.title_romaji} - ${res}`);\n          resolve();\n        }\n      });*/\n\n  const search = (list) => {\n    if (list.length > 0) {\n      $('#current').innerHTML = `${list.length - 1}`;\n      const newList = list.slice();\n      const item = newList.shift();\n      malSearch(auth, item)\n      .then((res) => {\n        display(res);\n        search(newList);\n        /* if (res && res.malID) {\n          add(item, res.malID);\n          search(newList);\n        } else {\n          fail(notFound(item));\n          search(newList);\n        } */\n      });\n    }\n  };\n\n  return {\n    sync: (list) => {\n      $('#status').innerHTML = `Items remaining: <span id=\"current\">${list.length}</span>. Errors: <span id=\"error-count\">0</span>.`;\n      search(list);\n    },\n    check: (user, pass) =>\n      malCheck(user, pass)\n      .then((res) => {\n        if (res !== 'Invalid credentials') {\n          auth = btoa(`${user}:${pass}`);\n          return true;\n        }\n        $('#status').innerHTML = 'Invalid MAL credentials';\n        return false;\n      }),\n  };\n})();\n\nconst sync = (event) => {\n  event.preventDefault();\n  const malUser = $('#mal-username').value.trim();\n  const malPass = $('#mal-password').value.trim();\n  Mal.check(malUser, malPass)\n  .then((res) => {\n    if (res) {\n      const aniUser = $('#anilist-username').value.trim();\n      Anilist.getList(aniUser)\n      .then((list) => {\n        console.log('Mal list', list);\n        if (list) Mal.sync(list);\n      })\n      .catch(err => console.log('err', err));\n    }\n  })\n  .catch(err => console.log('err', err));\n};\n\n\n(() => {\n  $('#credentials').on('submit', sync);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./assets/app.js"],"sourceRoot":""}