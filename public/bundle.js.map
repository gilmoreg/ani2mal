{"version":3,"sources":["webpack:///webpack/bootstrap 7d7b3120318ae6d1deb8","webpack:///./assets/anilist.js","webpack:///./assets/bling.js","webpack:///./assets/mal.js","webpack:///./assets/app.js"],"names":["Anilist","flatten","Object","keys","obj","reduce","accumulator","list","concat","acc2","item","uniqify","arr","seen","Set","filter","has","media","idMal","add","anilistCall","query","variables","fetch","method","headers","Accept","body","JSON","stringify","fetchList","userName","then","res","json","data","console","log","anime","manga","sanitize","type","progress","progressVolumes","status","score","id","title","romaji","getList","username","lists","map","catch","err","error","module","exports","window","$","document","querySelector","bind","$$","querySelectorAll","Node","prototype","on","name","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","i","Mal","auth","check","user","pass","authCheck","btoa","url","success","includes","Error","anilist","text","replace","require","Ani2Sync","total","errors","msg","reset","classList","remove","innerHTML","notFound","encodeURIComponent","malError","listAnime","a","markSuccess","markFail","showProgress","count","setAttribute","handle","length","newList","slice","shift","message","sync","event","preventDefault","malUser","value","trim","malPass","aniUser","setTimeout","restart","from","e"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;AChEA,IAAMA,UAAW,YAAM;AACrB;;;;;;;;;;;;;;;;;;;;AAqBA,MAAMC,UAAU,SAAVA,OAAU;AAAA;AAChB;AACEC,aAAOC,IAAP,CAAYC,GAAZ,EAAiBC,MAAjB,CAAwB,UAACC,WAAD,EAAcC,IAAd;AAAA;AACtB;AACAD,sBAAYE,MAAZ,CAAmBN,OAAOC,IAAP,CAAYC,IAAIG,IAAJ,CAAZ,EAAuBF,MAAvB,CAA8B,UAACI,IAAD,EAAOC,IAAP;AAAA,mBAC/CD,KAAKD,MAAL,CAAYJ,IAAIG,IAAJ,EAAUG,IAAV,CAAZ,CAD+C;AAAA,WAA9B,EACa,EADb,CAAnB;AAFsB;AAAA,OAAxB,EAGwC,EAHxC;AAFc;AAAA,GAAhB;;AAOA;AACA,MAAMC,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAS;AACvB,QAAMC,OAAO,IAAIC,GAAJ,EAAb;AACA,WAAOF,IAAIG,MAAJ,CAAW;AAAA,aAASF,KAAKG,GAAL,CAASN,KAAKO,KAAL,CAAWC,KAApB,IAA6B,KAA7B,GAAqCL,KAAKM,GAAL,CAAST,KAAKO,KAAL,CAAWC,KAApB,CAA9C;AAAA,KAAX,CAAP;AACD,GAHD;;AAKA,MAAME,cAAc,SAAdA,WAAc,CAACC,KAAD,EAAQC,SAAR;AAAA,WAClBC,MAAM,4BAAN,EAAoC;AAClCC,cAAQ,MAD0B;AAElCC,eAAS;AACP,wBAAgB,kBADT;AAEPC,gBAAQ;AAFD,OAFyB;AAMlCC,YAAMC,KAAKC,SAAL,CAAe;AACnBR,oBADmB;AAEnBC;AAFmB,OAAf;AAN4B,KAApC,CADkB;AAAA,GAApB;;AAaA,MAAMQ,YAAY,SAAZA,SAAY;AAAA,WAChBV,ytCAqDG,EAAEW,kBAAF,EArDH,EAsDCC,IAtDD,CAsDM;AAAA,aAAOC,IAAIC,IAAJ,EAAP;AAAA,KAtDN,EAuDCF,IAvDD,CAuDM;AAAA,aAAOC,IAAIE,IAAX;AAAA,KAvDN,EAwDCH,IAxDD,CAwDM,UAACC,GAAD,EAAS;AACbG,cAAQC,GAAR,CAAYJ,GAAZ;AACA,aAAOA,GAAP;AACD,KA3DD,EA4DCD,IA5DD,CA4DM;AAAA,aAAQ;AACZM,eAAO3B,QAAQV,QAAQgC,IAAIK,KAAZ,CAAR,CADK;AAEZC,eAAO5B,QAAQV,QAAQgC,IAAIM,KAAZ,CAAR;AAFK,OAAR;AAAA,KA5DN,EAgECP,IAhED,CAgEM,UAACC,GAAD,EAAS;AACbG,cAAQC,GAAR,CAAYJ,GAAZ;AACA,aAAOA,GAAP;AACD,KAnED,CADgB;AAAA,GAAlB;;AAsEA,MAAMO,WAAW,SAAXA,QAAW,CAAC9B,IAAD,EAAO+B,IAAP;AAAA,WAAiB;AAChCA,gBADgC;AAEhCC,gBAAUhC,KAAKgC,QAFiB;AAGhCC,uBAAiBjC,KAAKiC,eAHU;AAIhCC,cAAQlC,KAAKkC,MAJmB;AAKhCC,aAAOnC,KAAKmC,KALoB;AAMhCC,UAAIpC,KAAKO,KAAL,CAAWC,KANiB;AAOhC6B,aAAOrC,KAAKO,KAAL,CAAW8B,KAAX,CAAiBC;AAPQ,KAAjB;AAAA,GAAjB;;AAUA,SAAO;AACLC,aAAS;AAAA,aACPnB,UAAUoB,QAAV,EACGlB,IADH,CACQ;AAAA,4CACDmB,MAAMb,KAAN,CAAYc,GAAZ,CAAgB;AAAA,iBAAQZ,SAAS9B,IAAT,EAAe,OAAf,CAAR;AAAA,SAAhB,CADC,sBAEDyC,MAAMZ,KAAN,CAAYa,GAAZ,CAAgB;AAAA,iBAAQZ,SAAS9B,IAAT,EAAe,OAAf,CAAR;AAAA,SAAhB,CAFC;AAAA,OADR,EAKG2C,KALH,CAKS,UAACC,GAAD,EAAS;AACdlB,gBAAQmB,KAAR,CAAc,uBAAd,EAAuCD,GAAvC;AACA,2CAAiCJ,QAAjC;AACD,OARH,CADO;AAAA;AADJ,GAAP;AAYD,CA5Ie,EAAhB;;AA8IAM,OAAOC,OAAP,GAAiBzD,OAAjB,C;;;;;;;;;AC9IA;;AAEA;AACA0D,OAAOC,CAAP,GAAWC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAX;AACAF,OAAOK,EAAP,GAAYH,SAASI,gBAAT,CAA0BF,IAA1B,CAA+BF,QAA/B,CAAZ;AACAK,KAAKC,SAAL,CAAeC,EAAf,GAAoBT,OAAOS,EAAP,GAAY,UAAUC,IAAV,EAAgBC,EAAhB,EAAoB;AAClD,OAAKC,gBAAL,CAAsBF,IAAtB,EAA4BC,EAA5B;AACD,CAFD;AAGAE,SAASL,SAAT,CAAmBM,SAAnB,GAA+BC,MAAMP,SAArC;AACAK,SAASL,SAAT,CAAmBC,EAAnB,GAAwBI,SAASL,SAAT,CAAmBI,gBAAnB,GAAsC,UAAUF,IAAV,EAAgBC,EAAhB,EAAoB;AAChF,OAAKK,OAAL,CAAa,UAAUC,IAAV,EAAgBC,CAAhB,EAAmB;AAC9BD,SAAKR,EAAL,CAAQC,IAAR,EAAcC,EAAd;AACD,GAFD;AAGD,CAJD,C;;;;;;;;;ACTA;AACA,IAAMQ,MAAO,YAAM;AACjB,MAAIC,OAAO,EAAX;;AAEA,SAAO;AACLC,WAAO,eAACC,IAAD,EAAOC,IAAP,EAAgB;AACrB,UAAMC,YAAYC,KAAQH,IAAR,SAAgBC,IAAhB,CAAlB;AACA,UAAMG,oFAAkFF,SAAxF;AACA,aAAO3D,MAAM6D,GAAN,EACJpD,IADI,CACC;AAAA,eAAOC,IAAIC,IAAJ,EAAP;AAAA,OADD,EAEJF,IAFI,CAEC,UAACC,GAAD,EAAS;AACb,YAAIA,IAAIoD,OAAJ,IAAepD,IAAIoD,OAAJ,CAAYC,QAAZ,CAAqB,UAArB,CAAnB,EAAqD;AACnDR,iBAAOI,SAAP;AACA,iBAAO,IAAP;AACD;AACD,eAAO,KAAP;AACD,OARI,EASJ7B,KATI,CASE;AAAA,eAAOkC,MAAMjC,GAAN,CAAP;AAAA,OATF,CAAP;AAUD,KAdI;;AAgBLnC,SAAK;AAAA,aACHI,MAAM,UAAN,EAAkB;AAChBC,gBAAQ,MADQ;AAEhBG,cAAMC,KAAKC,SAAL,CAAe,EAAEiD,UAAF,EAAQU,gBAAR,EAAf,CAFU;AAGhB/D,iBAAS;AACPC,kBAAQ,kBADD;AAEP,0BAAgB;AAFT;AAHO,OAAlB,EAQCM,IARD,CAQM;AAAA,eAAOC,IAAIwD,IAAJ,EAAP;AAAA,OARN;AASA;AATA,OAUCzD,IAVD,CAUM;AAAA,eAAQyD,KAAKC,OAAL,CAAa,IAAb,EAAmB,EAAnB,CAAR;AAAA,OAVN,EAWCrC,KAXD,CAWO;AAAA,eAAOkC,MAAMjC,GAAN,CAAP;AAAA,OAXP,CADG;AAAA;AAhBA,GAAP;AA8BD,CAjCW,EAAZ;;AAmCAE,OAAOC,OAAP,GAAiBoB,GAAjB,C;;;;;;;;;ACpCA;AACA;AACA,mBAAAc,CAAQ,CAAR;AACA,IAAM3F,UAAU,mBAAA2F,CAAQ,CAAR,CAAhB;AACA,IAAMd,MAAM,mBAAAc,CAAQ,CAAR,CAAZ;;AAEA,IAAMC,WAAY,YAAM;AACtB,MAAIC,QAAQ,CAAZ;AACA,MAAIC,SAAS,CAAb;;AAEA;AACA,MAAMvC,QAAQ,SAARA,KAAQ,CAACwC,GAAD,EAAS;AACrB3D,YAAQmB,KAAR,CAAcwC,GAAd;AACD,GAFD;;AAIA,MAAMC,QAAQ,SAARA,KAAQ,GAAM;AAClBrC,MAAE,cAAF,EAAkBsC,SAAlB,CAA4BC,MAA5B,CAAmC,QAAnC;AACAvC,MAAE,OAAF,EAAWsC,SAAX,CAAqB9E,GAArB,CAAyB,QAAzB;AACAwC,MAAE,cAAF,EAAkBwC,SAAlB,GAA8B,EAA9B;AACAxC,MAAE,SAAF,EAAawC,SAAb,GAAyB,EAAzB;AACAxC,MAAE,UAAF,EAAcwC,SAAd,GAA0B,EAA1B;AACAxC,MAAE,gBAAF,EAAoBwC,SAApB,GAAgC,EAAhC;AACAxC,MAAE,YAAF,EAAgBwC,SAAhB,GAA4B,EAA5B;AACAxC,MAAE,SAAF,EAAasC,SAAb,CAAuBC,MAAvB,CAA8B,YAA9B;AACAL,YAAQ,CAAR;AACAC,aAAS,CAAT;AACD,GAXD;;AAaA,MAAMM,WAAW,SAAXA,QAAW,CAACrD,KAAD,EAAW;AAC1BY,MAAE,SAAF,EAAawC,SAAb,8EACiEE,mBAAmBtD,KAAnB,CADjE;AAID,GALD;;AAOA;AACA,MAAMuD,WAAW,SAAXA,QAAW,CAACvD,KAAD,EAAW;AAC1BY,MAAE,SAAF,EAAawC,SAAb,6BAAiDpD,KAAjD;AACA+C,cAAU,CAAV;AACD,GAHD;;AAKA;;;;;AAKA,MAAMS,YAAY,SAAZA,SAAY,CAACC,CAAD,EAAO;AACvB7C,MAAE,UAAF,EAAcwC,SAAd,oBAAyCK,EAAE1D,EAA3C,UAAkD0D,EAAEzD,KAApD;AACD,GAFD;;AAIA,MAAM0D,cAAc,SAAdA,WAAc,CAAC3D,EAAD,EAAQ;AAC1Ba,eAASb,EAAT,EAAemD,SAAf,CAAyB9E,GAAzB,CAA6B,OAA7B;AACD,GAFD;;AAIA,MAAMuF,WAAW,SAAXA,QAAW,CAAC5D,EAAD,EAAQ;AACvBa,eAASb,EAAT,EAAemD,SAAf,CAAyB9E,GAAzB,CAA6B,OAA7B;AACD,GAFD;;AAIA,MAAMwF,eAAe,SAAfA,YAAe,CAACC,KAAD,EAAW;AAC9BjD,MAAE,WAAF,EAAekD,YAAf,CAA4B,OAA5B,EAAsC,OAAOhB,QAAQe,KAAf,CAAD,GAA0Bf,KAA/D;AACAlC,MAAE,iBAAF,EAAqBwC,SAArB,GAAoCS,KAApC;AACAjD,MAAE,cAAF,EAAkBwC,SAAlB,gBAAyCL,MAAzC;AACD,GAJD;;AAMA,MAAMgB,SAAS,SAATA,MAAS,CAACvG,IAAD,EAAU;AACvBoG,iBAAapG,KAAKwG,MAAlB;AACA;AACA,QAAIxG,KAAKwG,MAAL,IAAe,CAAnB,EAAsB;;AAEtB,QAAMC,UAAUzG,KAAK0G,KAAL,EAAhB,CALuB,CAKO;AAC9B,QAAMvG,OAAOsG,QAAQE,KAAR,EAAb;AACA;AACAX,cAAU7F,IAAV;AACA0B,YAAQC,GAAR,CAAY,UAAZ,EAAwB3B,IAAxB;AACAmE,QAAI1D,GAAJ,CAAQT,IAAR,EACCsB,IADD,CACM,UAACmF,OAAD,EAAa;AACjB;AACA,UAAIA,OAAJ,EAAa;AACX,YAAIA,YAAY,SAAZ,IAAyBA,YAAY,SAAzC,EAAoD;AAClD/E,kBAAQC,GAAR,CAAY,SAAZ,EAAuB3B,KAAKoC,EAA5B;AACA2D,sBAAY/F,KAAKoC,EAAjB;AACD,SAHD,MAGO;AACL4D,mBAAShG,KAAKoC,EAAd;AACAwD,mBAAY5F,KAAKqC,KAAjB,UAA2BoE,OAA3B;AACA,cAAIA,YAAY,YAAhB,EAA8Bf,SAAS1F,KAAKqC,KAAd;AAC/B;AACF,OATD,MASO;AACL;AACA2D,iBAAShG,KAAKoC,EAAd;AACAwD,iBAAY5F,KAAKqC,KAAjB,UAA2BoE,OAA3B;AACAf,iBAAS1F,KAAKqC,KAAd;AACD;AACD;AACA+D,aAAOE,OAAP;AACD,KApBD,EAqBC3D,KArBD,CAqBO;AAAA,aAAOE,MAAMD,GAAN,CAAP;AAAA,KArBP;AAsBD,GAhCD;;AAkCA,SAAO;AACL8D,UAAM,cAACC,KAAD,EAAW;AACfA,YAAMC,cAAN;AACA,UAAMC,UAAU5D,EAAE,eAAF,EAAmB6D,KAAnB,CAAyBC,IAAzB,EAAhB;AACA,UAAMC,UAAU/D,EAAE,eAAF,EAAmB6D,KAAnB,CAAyBC,IAAzB,EAAhB;AACA9D,QAAE,SAAF,EAAasC,SAAb,CAAuB9E,GAAvB,CAA2B,YAA3B;AACA0D,UAAIE,KAAJ,CAAUwC,OAAV,EAAmBG,OAAnB,EACC1F,IADD,CACM,UAACC,GAAD,EAAS;AACb,YAAIA,GAAJ,EAAS;AACP,cAAM0F,UAAUhE,EAAE,mBAAF,EAAuB6D,KAAvB,CAA6BC,IAA7B,EAAhB;AACAzH,kBAAQiD,OAAR,CAAgB0E,OAAhB,EACC3F,IADD,CACM,UAACzB,IAAD,EAAU;AACd,gBAAIA,QAAQA,KAAKwG,MAAjB,EAAyB;AACvB;AACA;AACAf;AACA;AACArC,gBAAE,cAAF,EAAkBsC,SAAlB,CAA4B9E,GAA5B,CAAgC,QAAhC;AACAwC,gBAAE,OAAF,EAAWsC,SAAX,CAAqBC,MAArB,CAA4B,QAA5B;AACA;AACAL,sBAAQtF,KAAKwG,MAAb;AACA;AACA,qBAAOD,OAAOvG,IAAP,CAAP;AACD;AACD;AACAoD,cAAE,gBAAF,EAAoBwC,SAApB,2CAAsEwB,OAAtE;AACAC,uBAAW;AAAA,qBAAM5B,OAAN;AAAA,aAAX,EAA0B,IAA1B;AACA,mBAAOzC,MAAM,iCAAN,CAAP;AACD,WAlBD,EAmBCF,KAnBD,CAmBO;AAAA,mBAAOE,MAAMD,GAAN,CAAP;AAAA,WAnBP;AAoBD,SAtBD,MAsBO;AACL;AACAK,YAAE,YAAF,EAAgBwC,SAAhB,GAA4B,0BAA5B;AACAyB,qBAAW;AAAA,mBAAM5B,OAAN;AAAA,WAAX,EAA0B,IAA1B;AACA,iBAAOzC,MAAM,0BAAN,CAAP;AACD;AACD,eAAO,IAAP;AACD,OA/BD,EAgCCF,KAhCD,CAgCO;AAAA,eAAOE,MAAMD,GAAN,CAAP;AAAA,OAhCP;AAiCD,KAvCI;AAwCLuE,aAAS,mBAAM;AACb7B;AACD;AA1CI,GAAP;AA4CD,CAxIgB,EAAjB;;AA0IA,CAAC,YAAM;AACLrC,IAAE,cAAF,EAAkBQ,EAAlB,CAAqB,QAArB,EAA+ByB,SAASwB,IAAxC;AACAzD,IAAE,QAAF,EAAYQ,EAAZ,CAAe,OAAf,EAAwByB,SAASiC,OAAjC;AACAlE,IAAE,OAAF,EAAWQ,EAAX,CAAc,OAAd,EAAuB,YAAM;AAC3BR,MAAE,YAAF,EAAgBsC,SAAhB,CAA0B9E,GAA1B,CAA8B,WAA9B;AACD,GAFD;AAGAsD,QAAMqD,IAAN,CAAW/D,GAAG,mBAAH,CAAX,EAAoCW,OAApC,CAA4C,UAACqD,CAAD,EAAO;AACjDA,MAAE5D,EAAF,CAAK,OAAL,EAAc;AAAA,aAAMR,EAAE,YAAF,EAAgBsC,SAAhB,CAA0BC,MAA1B,CAAiC,WAAjC,CAAN;AAAA,KAAd;AACD,GAFD;AAGAzB,QAAMqD,IAAN,CAAW/D,GAAG,cAAH,CAAX,EAA+BW,OAA/B,CAAuC,UAACqD,CAAD,EAAO;AAC5CA,MAAE5D,EAAF,CAAK,OAAL,EAAc;AAAA,aAAMR,EAAE,YAAF,EAAgBsC,SAAhB,CAA0BC,MAA1B,CAAiC,WAAjC,CAAN;AAAA,KAAd;AACD,GAFD;AAGD,CAZD,I","file":"./public/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7d7b3120318ae6d1deb8","const Anilist = (() => {\n  /*\n    Anilist response takes the following form:\n    data: {\n      anime: {\n        statusLists: {\n          completed: [],\n          planning: [],\n          etc.\n        },\n        customLists: { etc. },\n      },\n      manga: {\n        statusLists: { etc. },\n        customLists: { etc. },\n      }\n    }\n    'data' is stripped off by the fetch function\n\n    flatten() combines the statusLists and customLists, and all of the lists embedded in them,\n    and creates one big flat array of items\n  */\n  const flatten = obj =>\n  // Outer reduce concats arrays built by inner reduce\n    Object.keys(obj).reduce((accumulator, list) =>\n      // Inner reduce builds an array out of the lists\n      accumulator.concat(Object.keys(obj[list]).reduce((acc2, item) =>\n        acc2.concat(obj[list][item]), [])), []);\n\n  // Remove duplicates from array\n  const uniqify = (arr) => {\n    const seen = new Set();\n    return arr.filter(item => (seen.has(item.media.idMal) ? false : seen.add(item.media.idMal)));\n  };\n\n  const anilistCall = (query, variables) =>\n    fetch('https://graphql.anilist.co', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables,\n      }),\n    });\n\n  const fetchList = userName =>\n    anilistCall(`\n      query ($userName: String) {\n        anime: MediaListCollection(userName: $userName, type: ANIME) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          },\n          customLists {\n            status\n            score(format:POINT_10)\n            progress\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        },\n        manga: MediaListCollection(userName: $userName, type: MANGA) {\n          statusLists {\n            status\n            score(format:POINT_10)\n            progress\n            progressVolumes\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          },\n          customLists {\n            status\n            score(format:POINT_10)\n            progress\n            progressVolumes\n            media {\n              idMal\n              title {\n                romaji\n              }\n            }\n          }\n        }\n      }\n    `, { userName })\n    .then(res => res.json())\n    .then(res => res.data)\n    .then((res) => {\n      console.log(res);\n      return res;\n    })\n    .then(res => ({\n      anime: uniqify(flatten(res.anime)),\n      manga: uniqify(flatten(res.manga)),\n    }))\n    .then((res) => {\n      console.log(res);\n      return res;\n    });\n\n  const sanitize = (item, type) => ({\n    type,\n    progress: item.progress,\n    progressVolumes: item.progressVolumes,\n    status: item.status,\n    score: item.score,\n    id: item.media.idMal,\n    title: item.media.title.romaji,\n  });\n\n  return {\n    getList: username =>\n      fetchList(username)\n        .then(lists => [\n          ...lists.anime.map(item => sanitize(item, 'anime')),\n          ...lists.manga.map(item => sanitize(item, 'manga')),\n        ])\n        .catch((err) => {\n          console.error('Anilist getList error', err);\n          return `No data found for user ${username}`;\n        }),\n  };\n})();\n\nmodule.exports = Anilist;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/anilist.js","/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/bling.js","/* globals $ */\nconst Mal = (() => {\n  let auth = '';\n\n  return {\n    check: (user, pass) => {\n      const authCheck = btoa(`${user}:${pass}`);\n      const url = `https://us-central1-douki-178418.cloudfunctions.net/mal-proxy/check?auth=${authCheck}`;\n      return fetch(url)\n        .then(res => res.json())\n        .then((res) => {\n          if (res.success && res.success.includes('username')) {\n            auth = authCheck;\n            return true;\n          }\n          return false;\n        })\n        .catch(err => Error(err));\n    },\n\n    add: anilist =>\n      fetch('/mal/add', {\n        method: 'post',\n        body: JSON.stringify({ auth, anilist }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.text())\n      // Strip off leading and tailing double quotes\n      .then(text => text.replace(/\"/g, ''))\n      .catch(err => Error(err)),\n  };\n})();\n\nmodule.exports = Mal;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/mal.js","/* eslint-disable no-unused-vars */\n/* globals $, $$ */\nrequire('./bling.js');\nconst Anilist = require('./anilist');\nconst Mal = require('./mal');\n\nconst Ani2Sync = (() => {\n  let total = 0;\n  let errors = 0;\n\n  // For errors related to bad credentials, API errors etc.\n  const error = (msg) => {\n    console.error(msg);\n  };\n\n  const reset = () => {\n    $('#credentials').classList.remove('hidden');\n    $('#sync').classList.add('hidden');\n    $('#error-count').innerHTML = '';\n    $('#errors').innerHTML = '';\n    $('#results').innerHTML = '';\n    $('.anilist-error').innerHTML = '';\n    $('.mal-error').innerHTML = '';\n    $('#submit').classList.remove('is-loading');\n    total = 0;\n    errors = 0;\n  };\n\n  const notFound = (title) => {\n    $('#errors').innerHTML += `\n      <li><a target=\"_blank\" href=\"https://www.google.com/search?q=${encodeURIComponent(title)}+site%3Amyanimelist.net\">\n      Please try adding it manually</a>.</li>\n    `;\n  };\n\n  // For errors reported by MAL (not found, not approved yet, etc.)\n  const malError = (title) => {\n    $('#errors').innerHTML += `<li>Could not match ${title}</li>`;\n    errors += 1;\n  };\n\n  /* const display = (res) => {\n      $(`#${mal}`).classList.add('added');\n    } else return null;\n  }; */\n\n  const listAnime = (a) => {\n    $('#results').innerHTML += `<li id=\"al-${a.id}\">${a.title}</li>`;\n  };\n\n  const markSuccess = (id) => {\n    $(`#al-${id}`).classList.add('added');\n  };\n\n  const markFail = (id) => {\n    $(`#al-${id}`).classList.add('error');\n  };\n\n  const showProgress = (count) => {\n    $('.progress').setAttribute('value', (100 * (total - count)) / total);\n    $('#status-message').innerHTML = `${count} items remaining.`;\n    $('#error-count').innerHTML = `Errors: ${errors}.`;\n  };\n\n  const handle = (list) => {\n    showProgress(list.length);\n    // Base case for recursion\n    if (list.length <= 0) return;\n\n    const newList = list.slice(); // treat arguments as immutable\n    const item = newList.shift();\n    // add anime to results to be marked success/fail later\n    listAnime(item);\n    console.log('handling', item);\n    Mal.add(item)\n    .then((message) => {\n      // this is the response from /mal/add - Created or Updated or an error\n      if (message) {\n        if (message === 'Created' || message === 'Updated') {\n          console.log('success', item.id);\n          markSuccess(item.id);\n        } else {\n          markFail(item.id);\n          malError(`${item.title}: ${message}`);\n          if (message === 'Invalid ID') notFound(item.title);\n        }\n      } else {\n        // Empty response from MAL means item not found\n        markFail(item.id);\n        malError(`${item.title}: ${message}`);\n        notFound(item.title);\n      }\n      // Recursively call until list is empty\n      handle(newList);\n    })\n    .catch(err => error(err));\n  };\n\n  return {\n    sync: (event) => {\n      event.preventDefault();\n      const malUser = $('#mal-username').value.trim();\n      const malPass = $('#mal-password').value.trim();\n      $('#submit').classList.add('is-loading');\n      Mal.check(malUser, malPass)\n      .then((res) => {\n        if (res) {\n          const aniUser = $('#anilist-username').value.trim();\n          Anilist.getList(aniUser)\n          .then((list) => {\n            if (list && list.length) {\n              // We have good inputs on all counts; let's go\n              // Clear old results\n              reset();\n              // Switch views\n              $('#credentials').classList.add('hidden');\n              $('#sync').classList.remove('hidden');\n              // Track total items in namespace for progress meter\n              total = list.length;\n              // Start recursive handler\n              return handle(list);\n            }\n            // Anilist returned nothing\n            $('.anilist-error').innerHTML = `Anilist.co returned no results for ${aniUser}.`;\n            setTimeout(() => reset(), 3000);\n            return error('Anilist.co returned no results.');\n          })\n          .catch(err => error(err));\n        } else {\n          // Mal auth check returned false\n          $('.mal-error').innerHTML = 'Invaild MAL credentials.';\n          setTimeout(() => reset(), 3000);\n          return error('Invaild MAL credentials.');\n        }\n        return null;\n      })\n      .catch(err => error(err));\n    },\n    restart: () => {\n      reset();\n    },\n  };\n})();\n\n(() => {\n  $('#credentials').on('submit', Ani2Sync.sync);\n  $('#reset').on('click', Ani2Sync.restart);\n  $('#help').on('click', () => {\n    $('#helpModal').classList.add('is-active');\n  });\n  Array.from($$('.modal-background')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n  Array.from($$('.modal-close')).forEach((e) => {\n    e.on('click', () => $('.is-active').classList.remove('is-active'));\n  });\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./assets/app.js"],"sourceRoot":""}