{"version":3,"sources":["webpack:///webpack/bootstrap 7bd71aa28414c75052e4","webpack:///./assets/config.js","webpack:///./assets/anilist.js","webpack:///./assets/bling.js","webpack:///./assets/mal.js","webpack:///./assets/app.js"],"names":["module","exports","ANILIST_TOKEN_URL","ENDPOINT","config","require","Anilist","fetchToken","fetch","then","res","json","JSON","parse","access_token","catch","Error","err","fetchList","username","token","buildList","lists","completed","plan_to_watch","dropped","on_hold","watching","sanitize","episodes_watched","item","list_status","score","priority","notes","title","anime","title_romaji","id","series_id","getList","map","window","$","document","querySelector","bind","$$","querySelectorAll","Node","prototype","on","name","fn","addEventListener","NodeList","__proto__","Array","forEach","elem","i","Mal","auth","check","user","pass","method","body","stringify","btoa","headers","Accept","add","anilist","Ani2Sync","total","errors","error","msg","console","reset","classList","toggle","innerHTML","remove","notFound","a","encodeURIComponent","malError","listAnime","markSuccess","markFail","showProgress","count","style","width","handle","list","length","newList","slice","shift","log","message","match","sync","event","preventDefault","malUser","value","trim","malPass","aniUser","restart"],"mappings":"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","file":"./public/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7bd71aa28414c75052e4","module.exports = {\n  ANILIST_TOKEN_URL: 'https://ytjv79nzl4.execute-api.us-east-1.amazonaws.com/dev/token',\n  ENDPOINT: 'http://localhost:4000',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/config.js","const config = require('./config');\n\nconst Anilist = (() => {\n  const fetchToken = () =>\n    fetch(config.ANILIST_TOKEN_URL)\n      .then(res => res.json())\n      .then(res => JSON.parse(res).access_token)\n      .catch(err => Error(err));\n\n  const fetchList = (username, token) =>\n    fetch(`https://anilist.co/api/user/${username}/animelist?access_token=${token}`)\n      .then(res => res.json())\n      .catch(err => Error(err));\n\n  const buildList = (res) => {\n    // console.log(Object.keys(res.lists));\n    // [ 'completed', 'plan_to_watch', 'dropped', 'on_hold', 'watching' ]\n    if (!res.lists) return [];\n    return [\n      ...res.lists.completed || [],\n      ...res.lists.plan_to_watch || [],\n      ...res.lists.dropped || [],\n      ...res.lists.on_hold || [],\n      ...res.lists.watching || [],\n    ];\n  };\n\n  const sanitize = item => ({\n    episodes_watched: item.episodes_watched,\n    list_status: item.list_status,\n    score: item.score,\n    priority: item.priority,\n    notes: item.notes,\n    title: item.anime.title_romaji,\n    id: item.series_id,\n  });\n\n  return {\n    getList: username =>\n      fetchToken()\n        .then(token => fetchList(username, token))\n        .then(res => buildList(res))\n        .then(res => res.map(item => sanitize(item)))\n        .catch(err => Error(err)),\n  };\n})();\n\nmodule.exports = Anilist;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/anilist.js","/* bling.js */\n\n// Modified to make $ querySelector and $$ qSA\nwindow.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\nNode.prototype.on = window.on = function (name, fn) {\n  this.addEventListener(name, fn);\n};\nNodeList.prototype.__proto__ = Array.prototype;\nNodeList.prototype.on = NodeList.prototype.addEventListener = function (name, fn) {\n  this.forEach(function (elem, i) {\n    elem.on(name, fn);\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./assets/bling.js","const config = require('./config');\n\nconst Mal = (() => {\n  let auth = '';\n\n  return {\n    check: (user, pass) =>\n      fetch(`${config.ENDPOINT}/mal/check`, {\n        method: 'post',\n        body: JSON.stringify({ auth: btoa(`${user}:${pass}`) }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.json())\n      .then((res) => {\n        if (res !== 'Invalid credentials') {\n          auth = btoa(`${user}:${pass}`);\n          return true;\n        }\n        return false;\n      })\n      .catch(err => Error(err)),\n\n    add: anilist =>\n      fetch(`${config.ENDPOINT}/mal/add`, {\n        method: 'post',\n        body: JSON.stringify({ auth, anilist }),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n      .then(res => res.json())\n      .catch(err => Error(err)),\n  };\n})();\n\nmodule.exports = Mal;\n\n\n\n// WEBPACK FOOTER //\n// ./assets/mal.js","/* eslint-disable no-unused-vars */\n/* globals $, $$ */\nrequire('./bling.js');\nconst Anilist = require('./anilist');\nconst Mal = require('./mal');\n\nconst Ani2Sync = (() => {\n  let total = 0;\n  let errors = 0;\n\n  // For errors related to bad credentials, API errors etc.\n  const error = (msg) => {\n    console.error(msg);\n    // TODO display something in the DOM\n  };\n\n  const reset = () => {\n    $('#credentials').classList.toggle('hidden');\n    $('#sync').classList.toggle('hidden');\n    $('#error-count').innerHTML = '';\n    $('#results').innerHTML = '';\n    $('#submit').classList.remove('is-loading');\n    total = 0;\n    errors = 0;\n  };\n\n  const notFound = (a) => {\n    $('#errors').innerHTML += `\n      <li><a target=\"_blank\" href=\"https://www.google.com/search?q=${encodeURIComponent(a.title)}+site%3Amyanimelist.net\">\n      Please try adding it manually</a>.</li>\n    `;\n  };\n\n  // For errors reported by MAL (not found, not approved yet, etc.)\n  const malError = (title) => {\n    $('#errors').innerHTML += `<li>Could not match ${title}</li>`;\n    errors += 1;\n  };\n\n  /* const display = (res) => {\n      $(`#${mal}`).classList.add('added');\n    } else return null;\n  }; */\n\n  const listAnime = (a) => {\n    $('#results').innerHTML += `<li id=\"al-${a.id}\">${a.title}</li>`;\n  };\n\n  const markSuccess = (id) => {\n    $(`#al-${id}`).classList.add('added');\n  };\n\n  const markFail = (id) => {\n    $(`#al-${id}`).classList.add('error');\n  };\n\n  const showProgress = (count) => {\n    $('#progress').style.width = `${(100 * (total - count)) / total}%`;\n    $('#status-message').innerHTML = `${count} items remaining.`;\n    $('#error-count').innerHTML = `Errors: ${errors}.`;\n  };\n\n  const handle = (list) => {\n    showProgress(list.length);\n    // Base case for recursion\n    if (list.length <= 0) return;\n\n    const newList = list.slice(); // treat arguments as immutable\n    const item = newList.shift();\n    // add anime to results to be marked success/fail later\n    listAnime(item);\n\n    Mal.add(item)\n    .then((res) => {\n      console.log('Mal.add res', res);\n      // this is the response from MAL - not found/blank or Already in list or Created\n      if (res) {\n        if (res.message === 'Created' || res.message.match(/The anime \\(id: \\d+\\) is already in the list./g)) {\n          markSuccess(item.id);\n        } else {\n          markFail(item.id);\n          malError(res.title);\n          if (res.message === 'Invalid ID') notFound(item);\n        }\n      } else {\n        // Empty response from MAL means item not found\n        notFound(item);\n      }\n      // Recursively call until list is empty\n      handle(newList);\n    })\n    .catch(err => error(err));\n  };\n\n  return {\n    sync: (event) => {\n      event.preventDefault();\n      const malUser = $('#mal-username').value.trim();\n      const malPass = $('#mal-password').value.trim();\n      $('#submit').classList.add('is-loading');\n      Mal.check(malUser, malPass)\n      .then((res) => {\n        if (res) {\n          const aniUser = $('#anilist-username').value.trim();\n          Anilist.getList(aniUser)\n          .then((list) => {\n            if (list) {\n              // We have good inputs on all three counts; let's go\n              // Clear old results and switch views\n              reset();\n              // Track total items in namespace for progress meter\n              total = list.length;\n              // Start recursive handler\n              return handle(list);\n            }\n            return error('Anilist.co returned no results.');\n          })\n          .catch(err => error(err));\n        }\n      })\n      .catch(err => error(err));\n    },\n    restart: () => {\n      reset();\n    },\n  };\n})();\n\n(() => {\n  $('#credentials').on('submit', Ani2Sync.sync);\n  $('#reset').on('click', Ani2Sync.restart);\n})();\n\n\n\n// WEBPACK FOOTER //\n// ./assets/app.js"],"sourceRoot":""}